<html>
    <head>
        <title>Password checker with JavaScript</title>
    </head>
    <body>
        <form>
            <p>
                <label for="password1">Enter the password</label>:
                <input type="password" name="password1" id="password1" required>
            </p>
            <p>
                <label for="password2">Confirm the password</label>:
                <input type="password" name="password2" id="password2" required>
            </p>

            <input type="submit" value="Send">
        </form>

        <p id="passwordHelp"></p>

        <!-- JavaScript code to perform password check -->
        <script>
            //passwordHandlder function
            const passwordHandler = e => {
                const password1 = document.getElementById("password1").value;
                const password2 = document.getElementById("password2").value;
                const passwordHelp = document.getElementById("passwordHelp");
                let message = "Password validation successfull";
                //Now go through the list of checks for password
                if(password1 === password2) {
                    if(password1.length >= 6) {
                        const regex = /\d+/;
                        if(!regex.test(password1)) {
                            message = "Error: password must contain at least 1 digit";
                        }

                    } else {
                        message = "Error: password must be at least 6 characters";
                    }

                } else {
                    message = "Error: passwords are not identical";
                }
                passwordHelp.textContent = message;
                e.preventDefault();
                
            }
            //Listen for the submit event on the form and then do a check for whether the
            //passwords match and follow password rules
            const formElements = Array.from(document.getElementsByTagName("form"));
            formElements.forEach(formElement => {
                formElement.addEventListener("submit", passwordHandler);
            });
            
        </script>
    </body>

</html>
